{% load static %}
<!-- Enhanced Navigation Bar -->
<nav class="navbar navbar-dark shadow-sm" style="background: linear-gradient(135deg, #2563eb 0%, #059669 100%); min-height: 140px;">
    <div class="container-fluid">
        <!-- TOP ROW: Logo and Title CENTERED -->
        <div class="w-100 d-flex justify-content-center mb-4">
            <div class="text-center">
                <img src="{% static 'img/logo/cfmp-logo.svg' %}" alt="CFMP Logo" height="80" class="mb-2">
                <div class="text-white fw-bold" style="font-size: 2.5rem; line-height: 1.1;">
                    Community Food Platform
                </div>
            </div>
        </div>
        
        <!-- BOTTOM ROW: All Navigation Buttons LEFT-ALIGNED -->
        <div class="nav-row d-flex align-items-center flex-nowrap" style="gap: 0.75rem; margin-top: 1rem;">
            <!-- Common: Home & Browse Donations -->
            <a class="btn btn-outline-light px-4 py-2 fw-semibold {% if request.resolver_match.url_name == 'home' %}btn-light text-primary{% endif %}"
               href="{% url 'home' %}" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 120px;">
                <i class="bi bi-house-heart me-2"></i>Home
            </a>
            <a class="btn btn-outline-light px-4 py-2 fw-semibold {% if request.resolver_match.url_name == 'list' and request.resolver_match.namespace == 'donations' %}btn-light text-primary{% endif %}"
               href="{% url 'donations:list' %}" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 150px;">
                <i class="bi bi-gift me-2"></i>Browse Donations
            </a>

            {% if user.is_authenticated %}
                {% if user.donor %}
                <a class="btn btn-outline-light px-4 py-2 fw-semibold {% if request.resolver_match.url_name == 'create' %}btn-light text-primary{% endif %}"
                   href="{% url 'donations:create' %}" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 160px;">
                    <i class="bi bi-plus-circle me-2"></i>Create Donation
                </a>
                {% endif %}
                {% if user.pantry %}
                <a class="btn btn-outline-light px-4 py-2 fw-semibold {% if request.resolver_match.url_name == 'claimed' %}btn-light text-primary{% endif %}"
                   href="{% url 'donations:claimed' %}" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 140px;">
                    <i class="bi bi-building me-2"></i>My Pantry
                </a>
                {% endif %}
                
                <!-- User dropdown -->
                <div class="nav-item dropdown">
                    <a class="btn btn-outline-light dropdown-toggle px-4 py-2 fw-semibold" href="#" id="userDropdown" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 160px;">
                        <i class="bi bi-person-circle me-2"></i>
                        {{ user.get_full_name|default:user.username }}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        {% if user.is_staff %}
                        <li><a class="dropdown-item" href="{% url 'admin:index' %}"><i class="bi bi-person-gear me-2"></i>Admin Dashboard</a></li>
                        {% if user.donor or user.pantry %}<li><hr class="dropdown-divider"></li>{% endif %}
                        {% endif %}
                        {% if user.donor %}
                        <li><a class="dropdown-item" href="{% url 'donations:my_donations' %}"><i class="bi bi-list-ul me-2"></i>My Donations</a></li>
                        {% elif user.pantry %}
                        <li><a class="dropdown-item" href="{% url 'donations:claimed' %}"><i class="bi bi-box-seam me-2"></i>Claimed Donations</a></li>
                        {% endif %}
                        {% if user.donor or user.pantry or user.is_staff %}<li><hr class="dropdown-divider"></li>{% endif %}
                        <li>
                            <form method="post" action="{% url 'auth:logout' %}" class="d-inline">{% csrf_token %}
                                <button type="submit" class="dropdown-item border-0 bg-transparent text-start w-100"><i class="bi bi-box-arrow-right me-2"></i>Logout</button>
                            </form>
                        </li>
                    </ul>
                </div>
            {% else %}
                <!-- Anonymous: Login & Register inline with consistent spacing -->
                <a class="btn btn-outline-light px-4 py-2 fw-semibold {% if request.resolver_match.url_name == 'login' %}btn-light text-primary{% endif %}"
                   href="{% url 'auth:login' %}" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 110px;">
                    <i class="bi bi-box-arrow-in-right me-2"></i>Login
                </a>
                <a class="btn btn-outline-light px-4 py-2 fw-semibold {% if request.resolver_match.url_name == 'register' %}btn-light text-primary{% endif %}"
                   href="{% url 'auth:register' %}" style="font-size: 1.1rem; text-decoration: none; border-radius: 12px; min-width: 120px;">
                    <i class="bi bi-person-plus me-2"></i>Register
                </a>
            {% endif %}
        </div>

<!-- Spacer for navbar -->
<div style="height: 140px;"></div>